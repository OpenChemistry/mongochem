#
# Script used by the BuildPackageTest.cmake module.
#

message(STATUS "Running script '${CMAKE_CURRENT_LIST_FILE}'")
message(STATUS "  executing command '\"${CMAKE_COMMAND}\" --build . --config \"${config}\" --target package'")
message(STATUS "  in binary_dir='@binary_dir@'")

execute_process(
  COMMAND ${CMAKE_COMMAND} --build . --config "${config}" --target package
  WORKING_DIRECTORY "@binary_dir@"
  RESULT_VARIABLE result
  )

if(NOT "${result}" STREQUAL "0")
  message(FATAL_ERROR "error: --build package call returned '${result}'")
endif()
